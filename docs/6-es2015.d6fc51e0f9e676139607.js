(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{QskC:function(t,e,i){"use strict";i.r(e);var s=i("ofXK"),r=i("3Pt+"),n=i("tyNb"),o=i("Kj3r"),c=i("vkgz"),a=i("fXoL"),u=i("4ZtF"),d=i("itXk"),p=i("lJxs"),b=i("eIep"),l=i("mrSG");let h=(()=>{let t=class extends u.a{constructor(){super({ui:{productsInfiniteList:{currentPage:1,pageSize:6,pageIds:[],hasReachedLimit:!1}}})}updateProductsInfiniteList(t){this.update({ui:Object.assign(Object.assign({},this.getValue().ui),{productsInfiniteList:t})})}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t=Object(l.b)([Object(u.c)({name:"products"})],t),t})(),f=(()=>{class t extends u.b{constructor(t){super(t),this.loading$=this.selectLoading(),this.infiniteListShowMoreIsDisabled$=Object(d.a)([this.selectLoading(),this.select(t=>t.ui.productsInfiniteList.hasReachedLimit)]).pipe(Object(p.a)(([t,e])=>t||e)),this.page$=this.select(t=>t.ui.productsInfiniteList.pageIds).pipe(Object(b.a)(t=>this.selectMany(t)))}getProductsInfiniteList(){return this.getValue().ui.productsInfiniteList}}return t.\u0275fac=function(e){return new(e||t)(a.Sb(h))},t.\u0275prov=a.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=i("PqYM"),m=i("7o/Q");class y{constructor(t){this.value=t}call(t,e){return e.subscribe(new I(t,this.value))}}class I extends m.a{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}const L=t=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=e.length;let s="";for(let r=0;r<t;r++)s+=e.charAt(Math.floor(Math.random()*i));return s},F=(()=>{const t=[];for(let e=0;e<100;e++)t.push({id:Math.random(),name:L(10),price:Number((20*Math.random()).toFixed(2))});return t})();let v=(()=>{class t{getFilteredList(t){return"string"==typeof t?F.filter(e=>e.name.includes(t)):t instanceof Map?F:void 0}getPage(t,e,i){const s=this.getFilteredList(i),r=(t-1)*e,n=r+e;return Object(g.a)(1e3).pipe((o={count:s.length,data:s.slice(r,n)},t=>t.lift(new y(o))));var o}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),O=(()=>{class t{constructor(t,e,i){this.productsStore=t,this.productsApi=e,this.productsQuery=i}loadProductsForInfiniteList(t,e,i,s){this.productsStore.setLoading(!0),this.productsApi.getPage(t,e,i).pipe(Object(c.a)(t=>this.productsStore.upsertMany(t.data)),Object(c.a)(t=>this.productsStore.setLoading(!1)),Object(c.a)(i=>{const r=i.data.map(t=>t.id),n=s?[...r]:[...this.productsQuery.getProductsInfiniteList().pageIds,...r];this.productsStore.updateProductsInfiniteList({pageIds:n,hasReachedLimit:i.count===n.length,currentPage:t,pageSize:e})})).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Sb(h),a.Sb(v),a.Sb(f))},t.\u0275prov=a.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function w(t,e){if(1&t&&(a.Ob(0,"li"),a.hc(1),a.Nb()),2&t){const t=e.$implicit;a.zb(1),a.jc(" ",t.name," - ",t.price.toFixed(2)," ")}}function S(t,e){1&t&&(a.Ob(0,"p"),a.hc(1," Cargando... "),a.Nb())}const j=[{path:"",component:(()=>{class t{constructor(t,e,i){this.productsQuery=t,this.productsService=e,this.fb=i,this._buildForm(),this._initFormListeners()}_initFormListeners(){this.queryFC.valueChanges.pipe(Object(o.a)(300),Object(c.a)(t=>this.productsService.loadProductsForInfiniteList(1,20,t,!0))).subscribe()}_buildForm(){this.queryFC=this.fb.control("")}_loadFirstResults(){this.productsService.loadProductsForInfiniteList(1,20,this.queryFC.value,!1)}showMore(){this.productsService.loadProductsForInfiniteList(this.productsQuery.getProductsInfiniteList().currentPage+1,20,this.queryFC.value,!1)}ngOnInit(){this._loadFirstResults()}}return t.\u0275fac=function(e){return new(e||t)(a.Jb(f),a.Jb(O),a.Jb(r.b))},t.\u0275cmp=a.Db({type:t,selectors:[["app-akita-store-pagination"]],decls:12,vars:10,consts:[["type","text","placeholder","Buscar por nombre",3,"formControl"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"disabled","click"]],template:function(t,e){1&t&&(a.Ob(0,"main"),a.Ob(1,"h1"),a.hc(2,"Productos"),a.Nb(),a.Kb(3,"input",0),a.Ob(4,"ul"),a.gc(5,w,2,2,"li",1),a.Zb(6,"async"),a.Nb(),a.gc(7,S,2,0,"p",2),a.Zb(8,"async"),a.Ob(9,"button",3),a.Wb("click",(function(){return e.showMore()})),a.Zb(10,"async"),a.hc(11,"Mostrar m\xe1s"),a.Nb(),a.Nb()),2&t&&(a.zb(3),a.bc("formControl",e.queryFC),a.zb(2),a.bc("ngForOf",a.ac(6,4,e.productsQuery.page$)),a.zb(2),a.bc("ngIf",a.ac(8,6,e.productsQuery.loading$)),a.zb(2),a.bc("disabled",a.ac(10,8,e.productsQuery.infiniteListShowMoreIsDisabled$)))},directives:[r.a,r.e,r.c,s.i,s.j],pipes:[s.b],styles:[""]}),t})()}];let P=(()=>{class t{}return t.\u0275mod=a.Hb({type:t}),t.\u0275inj=a.Gb({factory:function(e){return new(e||t)},imports:[[n.b.forChild(j)],n.b]}),t})();i.d(e,"AkitaStorePaginationModule",(function(){return M}));let M=(()=>{class t{}return t.\u0275mod=a.Hb({type:t}),t.\u0275inj=a.Gb({factory:function(e){return new(e||t)},imports:[[s.c,P,r.h]]}),t})()}}]);